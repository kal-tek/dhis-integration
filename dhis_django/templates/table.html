{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DHIS demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
  </head>

  <style>
    .bg-primary {
      background-color: #4f85bf !important;
    }
    .btn-primary {
      background-color: #4a84c9 !important;
      border-color: #4a84c9 !important;
    }
    .programs-bar {
      background-color: #4a84c9 !important;
      width: 100%;
      padding: 0;
      padding-left: 5px;
      margin: 0;
      color: #fff;
    }
    .thead {
      background-color: #dee0e2 !important;
    }
    table {
      border: 1px solid #c1cece !important;
    }
    .table-btn {
      width: 100%;
    }
  </style>
  <body>
    <!-- A grey horizontal navbar that becomes vertical on small screens -->
    <nav class="navbar navbar-expand-sm bg-primary">
      <div class="container">
        <button class="btn btn-primary" type="button">Home</button>
        <div class="d-flex">
          <button class="btn btn-primary" type="button">Downlog Log</button>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="container mt-3">
        <h2 class="programs-bar">Programs</h2>
        <table class="table table-bordered">
          <thead class="thead">
            <tr>
              <th>Name</th>
              <th>Nepali Month</th>
              <th></th>
              <th>Comments</th>
              <th></th>
              <th>Status</th>
            </tr>
          </thead>

          <tbody>
            <tr id="1">
              <td>John Doe John Doe</td>
              <td class="month">
                <input
                  type="month"
                  name="month_year"
                  min="2018-03"
                  value="2018-05"
                  class="form-control"
                />
              </td>
              <td>
                <button type="submit" class="btn btn-primary table-btn">
                  Download
                </button>
              </td>
              <td class="comment">
                <textarea
                  class="form-control"
                  rows="1"
                  name="comment"
                ></textarea>
              </td>
              <td>
                <button
                  type="submit"
                  class="btn btn-primary table-btn"
                  id="send-to-dhis"
                >
                  Send to DHIS
                </button>
              </td>
            </tr>
          </tbody>

          <tbody></tbody>
        </table>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
      integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
      integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"
      integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      $("#send-to-dhis").click(function (e) {
        e.preventDefault();
        $.ajax({
          type: "POST",
          url: "send_to_dhis/",
          data: {
            month: $(this).parent().parent().find("td.month").find("input").val(),
            comment: $(this).parent().parent().find("td.comment").find("textarea").val()
          },
          success: function (result) {
            alert("ok");
          },
          error: function (result) {
            alert("error");
          },
        });
      });
    </script>
  </body>
</html>
